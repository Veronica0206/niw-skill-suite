{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "NIW_Pillar_Output",
  "description": "Output contract for vera-niw-pillar skill. One object per pillar. All three Dhanasar prongs are present.",
  "type": "object",
  "required": [
    "applicant",
    "pillar_number",
    "pillar_title",
    "prong1a",
    "prong1b",
    "prong2",
    "future_plan",
    "prong3",
    "recommender_guidance"
  ],
  "properties": {
    "applicant": {
      "type": "string"
    },
    "pillar_number": {
      "type": "integer"
    },
    "pillar_title": {
      "type": "string"
    },
    "evidence_gaps_flagged": {
      "type": "array",
      "description": "Any [EVIDENCE NEEDED] items Claude flagged inline",
      "items": {
        "type": "string"
      }
    },
    "prong1a": {
      "type": "object",
      "description": "Distinguished from Routine Practice",
      "properties": {
        "heading": {
          "type": "string"
        },
        "nationwide_problem": {
          "type": "string"
        },
        "unique_capabilities": {
          "type": "string"
        },
        "transferable_solutions": {
          "type": "string"
        }
      }
    },
    "prong1b": {
      "type": "object",
      "description": "Broader Societal Implications",
      "properties": {
        "heading": {
          "type": "string"
        },
        "national_security": {
          "type": "string"
        },
        "economic_stakes": {
          "type": "string"
        },
        "public_welfare": {
          "type": "string"
        },
        "government_initiatives": {
          "type": "string"
        }
      }
    },
    "prong2": {
      "type": "object",
      "description": "Well-Positioned",
      "properties": {
        "heading": {
          "type": "string"
        },
        "primary_author": {
          "type": "string"
        },
        "methodologies": {
          "type": "string"
        },
        "record_of_success": {
          "type": "string"
        },
        "expert_endorsements": {
          "type": "string"
        }
      }
    },
    "future_plan": {
      "type": "object",
      "properties": {
        "heading": {
          "type": "string"
        },
        "phases": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "phase_name": {
                "type": "string"
              },
              "activities": {
                "type": "array",
                "items": {
                  "type": "string"
                }
              },
              "deliverable": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    "prong3": {
      "type": "object",
      "description": "Prong 3: Benefit of Waiver \u2014 pillar-specific balance test argument",
      "properties": {
        "heading": {
          "type": "string"
        },
        "impracticality": {
          "type": "string",
          "description": "5.1 \u2014 Why labor certification is impractical for this specific work"
        },
        "urgency": {
          "type": "string",
          "description": "5.2 \u2014 Why U.S. needs this contribution now; CET/federal program anchor"
        },
        "demonstrated_interest": {
          "type": "string",
          "description": "5.3 \u2014 Existing parties, adoption, or deployment showing non-speculative benefit"
        },
        "balance_test_conclusion": {
          "type": "string",
          "description": "5.4 \u2014 Concluding paragraph explicitly invoking the balance test standard"
        }
      }
    },
    "recommender_guidance": {
      "type": "array",
      "description": "Internal only \u2014 not for petition",
      "items": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "Academic",
              "Industry",
              "Regulatory",
              "Government"
            ]
          },
          "ideal_profile": {
            "type": "string"
          },
          "independence_requirement": {
            "type": "string"
          },
          "key_claims": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "distinctive_value": {
            "type": "string"
          }
        }
      }
    }
  }
}